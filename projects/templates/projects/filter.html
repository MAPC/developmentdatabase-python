{% extends "base.html" %}

{% block title %}Project Filter{% endblock %}

{% block style %}
{{ block.super }}
<link rel="stylesheet" href="{{ STATIC_URL }}libs/bootstrap/datepicker/css/datepicker.css" />
<link rel="stylesheet" href="{{ STATIC_URL }}css/projects.css">
<!-- leaflet -->
<link rel="stylesheet" href="{{ STATIC_URL }}libs/leaflet/leaflet.css" />
<!--[if lte IE 8]><link rel="stylesheet" href="{{ STATIC_URL }}css/leaflet.ie.css" /><![endif]-->
{% endblock %}

{% block pageheader %}
<h1 class="front-page">Development Projects in {{ user_town_name }}</h1>
<p class="lead">Do we need text here?</p>
{% endblock pageheader %}

{% block body %}
<section>
        <div class="row">
            <div class="span12">
                <p><a href="javascript:void(0)" data-toggle="collapse" data-target="#filter-container"><span id="filter-toggle-status">Hide</span> Project Filter Options</a></p>
            </div>
        </div>
        <div class="collapse in" id="filter-container">
            <form class="" id="filters">
                <div class="row">
                    <div class="span12">
                        <h2>Filter Options</h2>
                    </div>
                </div>
                <div class="row">
                    <div class="span4">
                        <label>Municipality</label>
                        <select id="taz__town_id" class="span3 project-filter">
                            <option value="">-</option>
                            <option value="10">Arlington</option>
                            <option value="49">Cambridge</option>
                            <option value="274">Somerville</option>
                        </select>
                    </div>
                    <div class="span4">
                        <label>Completion date between</label>
                        <input type="text" class="span2 datepicker project-filter" value="01/01/2000" data-date-format="mm/dd/yyyy" id="startdate">
                        <input type="text" class="span2 datepicker project-filter" value="03/26/2012" data-date-format="mm/dd/yyyy" id="enddate">
                    </div>
                    <div class="span4">
                        <label>Status</label>
                        <select class="span3 project-filter" id="status__exact">
                            <option>-</option>
                            <option value="completed">Completed</option>
                            <option value="construction">Under construction</option>
                            <option value="planning">Advanced planning/permitting</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="span12"><a href="javascript:void(0)" class="btn" id="apply-filter">Apply Filter</a></div>
                </div>
            </form>
        </div>
</section>
<section>
    <div class="row">
        <div class="span12">
            <div id="map" class="well">Project Map</div>
        </div>
    </div>
</section>
<section>
    <div class="row">
        <div class="span12">
            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="projects">
                <thead>
                    <tr>
                        <th>Project #</th>
                        <th>Name</th>
                        <th>Status</th>
                        <th>Confirmed</th>
                        <th>Located</th>
                        <th>&nbsp;</th>
                    </tr>
                </thead>
                <tbody></tbody>
                <tfoot>
                    <tr>
                        <th>Project #</th>
                        <th>Name</th>
                        <th>Status</th>
                        <th>Confirmed</th>
                        <th>Located</th>
                        <th>&nbsp;</th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</section>
{% endblock %}

{% block javascript %}
<script src="{{ STATIC_URL }}libs/bootstrap/datepicker/js/bootstrap-datepicker.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}libs/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}libs/leaflet/leaflet.js"></script>
<script src="{{ STATIC_URL }}js/projects.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function() {

        // load town projects
        dd.filter.set("taz__town_id", {{ user_town_id|default:"35" }});
        dd.filter.apply();

    });

</script>
{% endblock %}